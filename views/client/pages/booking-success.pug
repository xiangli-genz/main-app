extends ../layouts/default.pug

block main
  style.
    .booking-success-page {
      padding: 60px 0;
    }
    
    .booking-success-wrap {
      max-width: 800px;
      margin: 0 auto;
    }
    
    .success-header {
      text-align: center;
      margin-bottom: 40px;
    }
    
    .success-icon {
      font-size: 70px;
      color: #00B69B;
      margin-bottom: 20px;
      display: block;
    }
    
    .success-title {
      color: var(--color-primary);
      margin-bottom: 10px;
      font-size: 28px;
      font-weight: 700;
    }
    
    .success-subtitle {
      color: #666;
      font-size: 15px;
      margin: 0;
    }
    
    .booking-code {
      color: var(--color-primary);
      font-size: 18px;
      font-weight: 700;
    }
    
    .info-card {
      border-radius: 12px;
      padding: 25px;
      margin-bottom: 20px;
    }
    
    .movie-card {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }
    
    .movie-title {
      margin: 0 0 15px 0;
      font-size: 22px;
      font-weight: 600;
    }
    
    .movie-meta {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
    }
    
    .movie-meta-item {
      font-size: 14px;
    }
    
    .movie-meta-item i {
      margin-right: 8px;
      opacity: 0.9;
    }
    
    .customer-card {
      background: #f8f9fa;
      padding: 20px;
    }
    
    .card-title {
      margin: 0 0 15px 0;
      color: var(--color-primary);
      font-size: 16px;
      font-weight: 600;
    }
    
    .customer-meta {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
    }
    
    .customer-meta-item {
      font-size: 14px;
      color: #333;
    }
    
    .customer-meta-item i {
      margin-right: 8px;
      color: #666;
    }
    
    .customer-meta-item.full-width {
      grid-column: 1 / -1;
    }
    
    .ticket-card {
      background: white;
      border: 2px dashed #ddd;
    }
    
    .seats-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 15px;
    }
    
    .seat-tag {
      background: #e3f2fd;
      color: #1976d2;
      padding: 6px 12px;
      border-radius: 6px;
      font-size: 13px;
      font-weight: 500;
    }
    
    .seat-tag.vip {
      background: #fff3e0;
      color: #f57c00;
    }
    
    .seat-tag.couple {
      background: #fce4ec;
      color: #c2185b;
    }
    
    .combos-list {
      margin-top: 15px;
      padding-top: 15px;
      border-top: 1px solid #eee;
    }
    
    .combo-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 0;
      font-size: 14px;
      color: #333;
    }
    
    .combo-name {
      flex: 1;
    }
    
    .combo-price {
      font-weight: 600;
      color: var(--color-primary);
    }
    
    .payment-card {
      background: #f5f5f5;
      padding: 25px;
    }
    
    .price-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 0;
      font-size: 15px;
    }
    
    .price-label {
      color: #666;
    }
    
    .price-value {
      font-weight: 600;
      color: #333;
    }
    
    .price-row.total {
      border-top: 2px solid #ddd;
      padding-top: 15px;
      margin-top: 10px;
      font-size: 18px;
    }
    
    .price-row.total .price-label {
      color: var(--color-primary);
      font-weight: 700;
    }
    
    .price-row.total .price-value {
      color: var(--color-primary);
      font-size: 24px;
      font-weight: 700;
    }
    
    .price-row.discount .price-value {
      color: #e74c3c;
    }
    
    .status-badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 4px;
      font-size: 13px;
      font-weight: 500;
    }
    
    .actions-group {
      margin-top: 30px;
      text-align: center;
      display: flex;
      gap: 15px;
      justify-content: center;
      flex-wrap: wrap;
    }
    
    @media (max-width: 767.98px) {
      .booking-success-page {
        padding: 45px 0;
      }
      
      .success-icon {
        font-size: 50px;
      }
      
      .success-title {
        font-size: 22px;
      }
      
      .booking-code {
        font-size: 16px;
      }
      
      .movie-meta,
      .customer-meta {
        grid-template-columns: 1fr;
      }
      
      .info-card {
        padding: 20px;
      }
      
      .actions-group {
        flex-direction: column;
      }
      
      .actions-group .button-outline {
        width: 100%;
      }
    }

  .container
    .booking-success-page
      .booking-success-wrap
        // Success Header
        .success-header
          i.fa-solid.fa-circle-check.success-icon
          h2.success-title Đặt Vé Thành Công!
          p.success-subtitle
            | Mã đặt vé: 
            span.booking-code #{bookingDetail.bookingCode}
        
        // Movie Info
        .info-card.movie-card
          h3.movie-title #{bookingDetail.movieName}
          .movie-meta
            .movie-meta-item
              i.fa-solid.fa-building
              | #{bookingDetail.cinema}
            .movie-meta-item
              i.fa-solid.fa-film
              | #{bookingDetail.showtime.format}
            .movie-meta-item
              i.fa-regular.fa-calendar
              | #{bookingDetail.showtimeDateFormat}
            .movie-meta-item
              i.fa-regular.fa-clock
              | #{bookingDetail.showtime.time}
        
        // Customer Info
        .info-card.customer-card
          h4.card-title Thông Tin Khách Hàng
          .customer-meta
            .customer-meta-item
              i.fa-solid.fa-user
              strong #{bookingDetail.fullName}
            .customer-meta-item
              i.fa-solid.fa-phone
              strong #{bookingDetail.phone}
            if bookingDetail.email
              .customer-meta-item.full-width
                i.fa-solid.fa-envelope
                strong #{bookingDetail.email}
            if bookingDetail.note
              .customer-meta-item.full-width
                i.fa-solid.fa-note-sticky
                | #{bookingDetail.note}
        
        // Ticket Details
        .info-card.ticket-card
          h4.card-title Chi Tiết Vé
          
          div
            strong(style="font-size: 14px; color: #666; margin-bottom: 10px; display: block;") Ghế đã chọn:
            .seats-grid
              each seat in bookingDetail.seats
                - var seatClass = seat.type === 'vip' ? 'vip' : seat.type === 'couple' ? 'couple' : ''
                span(class=`seat-tag ${seatClass}`)
                  | #{seat.seatNumber} - #{(seat.price || 0).toLocaleString('vi-VN')}đ
          
          if bookingDetail.combos && bookingDetail.combos.length > 0
            .combos-list
              strong(style="font-size: 14px; color: #666; margin-bottom: 10px; display: block;") Combo đã chọn:
              each combo in bookingDetail.combos
                .combo-item
                  .combo-name #{combo.name} x#{combo.quantity}
                  .combo-price #{(combo.totalPrice || 0).toLocaleString('vi-VN')}đ
        
        // Payment Summary
        .info-card.payment-card
          .price-row
            .price-label Tiền vé:
            .price-value #{(bookingDetail.subTotal || 0).toLocaleString("vi-VN")}đ
          
          if bookingDetail.comboTotal > 0
            .price-row
              .price-label Tiền combo:
              .price-value #{(bookingDetail.comboTotal || 0).toLocaleString("vi-VN")}đ
          
          if bookingDetail.discount > 0
            .price-row.discount
              .price-label Giảm giá:
              .price-value -#{(bookingDetail.discount || 0).toLocaleString("vi-VN")}đ
          
          .price-row.total
            .price-label Tổng thanh toán:
            .price-value #{(bookingDetail.total || 0).toLocaleString("vi-VN")}đ
          
          .price-row
            .price-label Phương thức thanh toán:
            .price-value #{bookingDetail.paymentMethodName}
          
          .price-row
            .price-label Trạng thái thanh toán:
            .price-value
              if bookingDetail.paymentStatus === 'paid'
                span.status-badge.badge-green #{bookingDetail.paymentStatusName}
              else
                span.status-badge.badge-orange #{bookingDetail.paymentStatusName}
          
          .price-row
            .price-label Trạng thái đặt vé:
            .price-value
              if bookingDetail.status === 'confirmed' || bookingDetail.status === 'completed'
                span.status-badge.badge-green #{bookingDetail.statusName}
              else if bookingDetail.status === 'cancelled'
                span.status-badge.badge-red #{bookingDetail.statusName}
              else
                span.status-badge.badge-orange #{bookingDetail.statusName}
        
        // Actions
        .actions-group
          a.button-outline(href="/") Về Trang Chủ
          a.button-outline(href="/user/bookings") Xem Đơn Đặt Của Tôi